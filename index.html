# Create version with smaller font on mobile, keeping all columns visible (no removal)
from pathlib import Path

html = """<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>German A1 Vocabulary ‚Äî Goal Trainer (Responsive Font)</title>
<style>
  :root{
    --bg:#0b1020;--card:#111833;--text:#e9ecf5;--muted:#9aa3b2;--accent:#6ea8fe;--border:#233055;
    --highlight:#1b2750;--btn:#0d1737;--yellow:#f1c40f;--red:#e74c3c;--green:#2ecc71;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
       background:linear-gradient(180deg,#0b1020 0%,#0e1430 100%);color:var(--text);
       padding:40px 20px;line-height:1.5;font-size:16px}
  .wrap{max-width:1200px;margin:0 auto}
  header h1{font-size:2rem;margin:0 0 .25rem 0}
  header p{margin:0 0 1rem 0;color:var(--muted)}
  .controls,.goalbar{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:14px;align-items:center}
  .select,.range,.btn,.num{background:var(--btn);border:1px solid var(--border);color:var(--text);
    border-radius:10px;padding:8px 10px;font-size:.95rem}
  .range,.num{padding:6px 10px}
  .btn{cursor:pointer}
  .btn.primary{border-color:var(--accent)}
  .btn.warn{border-color:var(--yellow)}
  .btn.danger{border-color:var(--red)}
  .badge{display:inline-block;padding:4px 10px;border-radius:999px;border:1px solid var(--border);background:#0c1430;color:var(--muted);font-size:.85rem}
  .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.35);overflow:hidden}
  .toolbar{display:flex;gap:12px;padding:12px;border-bottom:1px solid var(--border);background:rgba(255,255,255,.02);align-items:center;position:sticky;top:0;z-index:5;backdrop-filter:blur(6px)}
  .toolbar input{flex:1;padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:#0c1430;color:var(--text);outline:none}
  table{width:100%;border-collapse:collapse}
  thead th{text-align:left;font-weight:700;padding:14px;border-bottom:1px solid var(--border);background:#0d1737;position:sticky;top:110px;z-index:2}
  thead th.iconcol{width:48px;text-align:center}
  thead th.goalcol{width:70px;text-align:center}
  tbody td{padding:12px 14px;border-bottom:1px solid #1c2547;vertical-align:middle}
  tbody tr:nth-child(even) td{background:rgba(255,255,255,0.02)}
  tbody tr.highlight td{background:var(--highlight);transition:background .15s ease}
  .german{font-weight:600}
  .unit{color:var(--muted)}
  .goalcb{transform:scale(1.2);cursor:pointer}
  .speak{display:inline-flex;align-items:center;justify-content:center;height:32px;width:32px;border-radius:10px;border:1px solid var(--border);background:#0c1430;cursor:pointer}
  .speak:hover{outline:2px solid rgba(110,168,254,.25)}
  .speak svg{width:18px;height:18px;fill:var(--text)}
  .note{background:#2d2a00;color:#fff;border:1px dashed #8a6d00;padding:10px;border-radius:10px;margin:10px 0}
  .ok{background:#062d16;border:1px solid #0b6e3d}

  /* ===== Mobile responsiveness ===== */
  @media (max-width: 640px){
    body { font-size: 13px; }
    header h1 { font-size: 1.35rem; }
    .controls, .goalbar { gap: 6px; font-size: 13px; }
    table { font-size: 13px; }
    th, td { padding: 8px; }
    .toolbar span { display: none; }
  }
</style>
</head>
<body>
<div class="wrap">
  <header>
    <h1>German A1 Vocabulary ‚Äî Goal Trainer</h1>
    <p class="badge">Responsive font, all columns visible</p>
  </header>

  <div id="ttsWarn" class="note" style="display:none"></div>

  <div class="controls">
    <label for="voiceSelect">Voice:</label>
    <select id="voiceSelect" class="select" aria-label="Choose German voice"></select>
    <button id="testVoice" class="btn primary" type="button">Test voice</button>
    <label for="rate">Rate:</label>
    <input id="rate" class="range" type="range" min="0.6" max="1.4" step="0.05" value="1">
    <span id="rateVal">1.00√ó</span>
    <label for="pitch">Pitch:</label>
    <input id="pitch" class="range" type="range" min="0.6" max="1.4" step="0.05" value="1">
    <span id="pitchVal">1.00</span>
    <button id="stopAll" class="btn danger" type="button">Stop</button>
  </div>

  <div class="goalbar">
    <span>Goal repeats:</span>
    <label for="repWord">Word</label>
    <input id="repWord" class="num" type="number" min="1" max="10" value="2">
    <label for="repMeaning">Meaning</label>
    <input id="repMeaning" class="num" type="number" min="0" max="10" value="1">
    <label for="gapMs">Gap ms</label>
    <input id="gapMs" class="num" type="number" min="0" step="50" value="400">
    <button id="startGoal" class="btn primary" type="button">Start Goal ‚ñ∂</button>
    <button id="pauseGoal" class="btn warn" type="button">Pause ‚è∏</button>
    <button id="resetGoal" class="btn" type="button">Reset ‚ü≤</button>
    <span id="goalCount" class="badge">0 selected</span>
    <span id="goalProg" class="badge ok"></span>
  </div>

  <div class="card">
    <div class="toolbar">
      <input id="filter" type="search" placeholder="Filter... type 'goal:' to show only selected goals">
      <span>Click ‚úì to add/remove goals. Click üîä to pronounce.</span>
    </div>
    <table id="vocab">
      <thead>
        <tr><th class="goalcol">Goal ‚úì</th><th class="iconcol">üîä</th><th>German</th><th>English</th><th>Unit</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <p class="badge">Selections are saved locally and the page works offline.</p>
</div>

<script>
  const data = [
    ["eins","one","Unit 1"],["zwei","two","Unit 1"],["Guten Morgen!","Good morning!","Unit 1"],
    ["die Mutter","mother","Unit 2"],["der Vater","father","Unit 2"],
    ["der Apfel","apple","Unit 3"],["der Kaffee","coffee","Unit 3"],
    ["die K√ºche","kitchen","Unit 4"],
    ["heute","today","Unit 5"],
    ["das Wetter","weather","Unit 6"],
    ["der Lehrer / die Lehrerin","teacher","Unit 7"]
  ];

  const tbody = document.querySelector("tbody");
  const LS_KEY = "german_a1_goals_v1";

  function loadGoals(){ try {return JSON.parse(localStorage.getItem(LS_KEY))||{}} catch{ return {}; } }
  function saveGoals(m){ localStorage.setItem(LS_KEY, JSON.stringify(m)); }
  let goals = loadGoals();

  function iconSVG(){ return `<svg viewBox="0 0 24 24" aria-hidden="true">
    <path d="M3 10v4h3l4 4V6L6 10H3z"></path>
    <path d="M14.5 12c0-1.77 1-3.29 2.46-4.03l.98 1.73A3.49 3.49 0 0 0 16.5 12c0 1.3.7 2.42 1.74 3.03l-.98 1.73A5.5 5.5 0 0 1 14.5 12z"></path>
    <path d="M19 5.5 20 7a7 7 0 0 1 0 10l-1 1.5A8.97 8.97 0 0 0 21 12a8.97 8.97 0 0 0-2-6.5z"></path>
  </svg>`; }

  function rowTemplate([de,en,unit]){
    const id = encodeURIComponent(de);
    const checked = goals[id] ? "checked" : "";
    return `<tr data-id="${id}">
      <td style="text-align:center"><input type="checkbox" class="goalcb" ${checked}></td>
      <td style="text-align:center"><button class="speak" type="button" data-text="${de}">${iconSVG()}</button></td>
      <td class="german">${de}</td>
      <td class="english">${en}</td>
      <td class="unit">${unit}</td>
    </tr>`;
  }

  function renderRows(rows){
    tbody.innerHTML = rows.map(rowTemplate).join("");
    bindRows();
    updateGoalCount();
  }
  renderRows(data);

  const input = document.getElementById("filter");
  input.addEventListener("input", e => {
    const q = e.target.value.toLowerCase().trim();
    let rows = data;
    if(q.startsWith("goal")) rows = data.filter(([de]) => goals[encodeURIComponent(de)]);
    else if(q) rows = data.filter(([de,en,u]) => de.toLowerCase().includes(q) || en.toLowerCase().includes(q) || u.toLowerCase().includes(q));
    renderRows(rows);
  });

  const voiceSelect = document.getElementById("voiceSelect");
  const testVoice = document.getElementById("testVoice");
  const rate = document.getElementById("rate"), pitch = document.getElementById("pitch");
  const rateVal = document.getElementById("rateVal"), pitchVal = document.getElementById("pitchVal");
  const stopAll = document.getElementById("stopAll");

  let voices = [], currentVoice = null;
  function listVoices(){
    voices = speechSynthesis.getVoices();
    voiceSelect.innerHTML = "";
    const german = voices.filter(v => (v.lang||"").toLowerCase().startsWith("de"));
    const others = voices.filter(v => !(v.lang||"").toLowerCase().startsWith("de"));
    [...german,...others].forEach(v => {
      const opt = document.createElement("option");
      opt.value = v.name;
      opt.textContent = `${v.name} ‚Äî ${v.lang}` + (german.includes(v) ? " (DE)" : "");
      voiceSelect.appendChild(opt);
    });
    currentVoice = german[0] || voices[0] || null;
    if(currentVoice) voiceSelect.value = currentVoice.name;
  }
  listVoices();
  if(speechSynthesis.onvoiceschanged!==undefined) speechSynthesis.onvoiceschanged=listVoices;

  async function speak(text){
    if(!("speechSynthesis" in window)){ alert("Speech Synthesis not supported."); return; }
    speechSynthesis.cancel();
    const u = new SpeechSynthesisUtterance(text);
    u.lang = currentVoice?.lang || "de-DE"; u.voice = currentVoice; u.rate = Number(rate.value); u.pitch = Number(pitch.value);
    return new Promise(res=>{u.onend=res;speechSynthesis.speak(u);});
  }

  function bindRows(){
    document.querySelectorAll(".speak").forEach(btn => btn.addEventListener("click", ()=>speak(btn.dataset.text)));
    document.querySelectorAll(".goalcb").forEach(cb => {
      cb.addEventListener("change",()=>{const id=cb.closest("tr").dataset.id;if(cb.checked)goals[id]=true;else delete goals[id];saveGoals(goals);updateGoalCount();});
    });
  }
  function updateGoalCount(){document.getElementById("goalCount").textContent=Object.keys(goals).length+" selected";}

  const startBtn=document.getElementById("startGoal"),pauseBtn=document.getElementById("pauseGoal"),resetBtn=document.getElementById("resetGoal"),goalProg=document.getElementById("goalProg");
  const repWord=document.getElementById("repWord"),repMeaning=document.getElementById("repMeaning"),gapMs=document.getElementById("gapMs");
  let session={list:[],idx:0,paused:false,running:false};
  function sleep(ms){return new Promise(r=>setTimeout(r,ms));}
  async function speakTimes(text,n){for(let i=0;i<n;i++){if(!session.running||session.paused)return;await speak(text);await sleep(Number(gapMs.value));}}
  async function runSession(){
    const ids=Object.keys(goals);session.list=data.filter(([de])=>ids.includes(encodeURIComponent(de)));session.idx=0;session.running=true;session.paused=false;
    if(!session.list.length){alert("No goals selected.");session.running=false;return;}
    while(session.running&&session.idx<session.list.length){
      while(session.paused)await sleep(100);
      const[de,en]=session.list[session.idx];goalProg.textContent=`Now: ${de} ‚Üí ${en} (${session.idx+1}/${session.list.length})`;
      await speakTimes(de,Math.max(0,Number(repWord.value)));
      if(!session.running)break;await speakTimes(en,Math.max(0,Number(repMeaning.value)));if(!session.running)break;session.idx++;await sleep(Number(gapMs.value));
    }
    session.running=false;goalProg.textContent="Goal session "+(session.idx>=session.list.length?"complete ‚úî":"stopped");
  }
  startBtn.addEventListener("click",()=>{session.running=false;speechSynthesis.cancel();runSession();});
  pauseBtn.addEventListener("click",()=>{session.paused=!session.paused;pauseBtn.textContent=session.paused?"Resume ‚ñ∂":"Pause ‚è∏";});
  resetBtn.addEventListener("click",()=>{session.running=false;session.paused=false;session.idx=0;goalProg.textContent="";speechSynthesis.cancel();});
  stopAll.addEventListener("click",()=>{session.running=false;session.paused=false;speechSynthesis.cancel();pauseBtn.textContent="Pause ‚è∏";});
</script>
</body>
</html>"""

path = Path("/mnt/data/german_a1_vocab_units_goal_tts_fix_mobile_font.html")
path.write_text(html, encoding="utf-8")
path.as_posix()
